<nz-card [nzBordered]="false" [nzTitle]="step0Edit">
  <nz-descriptions nzBordered [nzColumn]="1" nzLayout="vertical">
    <nz-descriptions-item nzTitle="项目内部ID">自动生成</nz-descriptions-item>
    <nz-descriptions-item nzTitle="项目名称">{{ projectStepService.projectName }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="立项依据">{{ projectStepService.initRoot.name }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="收到时间">{{ projectStepService.initRootDate | date: 'yyyy-MM-dd' }}</nz-descriptions-item>
    <nz-descriptions-item *ngIf="projectStepService.initRoot.name === '内部通知'" nzTitle="{{ projectStepService.initRoot.name }}备注">{{
      projectStepService.initRootMessage
    }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="项目经理">{{ projectStepService.projectManager.name }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="项目主要成员">{{ projectMembers }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="项目属性"
      >{{ projectStepService.projectProperty === 'child' ? '子项目' : ''
      }}{{ projectStepService.projectProperty === 'parent' ? '主项目' : '' }}</nz-descriptions-item
    >
    <nz-descriptions-item nzTitle="关联主项目" *ngIf="projectStepService.projectProperty === 'child'">{{
      projectStepService.projectRelevance.name
    }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="立项时间">自动生成</nz-descriptions-item>
  </nz-descriptions>
</nz-card>
<ng-template #step0Edit>
  <span
    >{{ projectStepService.stepTitles[0] }} <i nz-icon nzType="edit" (click)="stepEditJump(0)" nz-tooltip nzTooltipTitle="去修改"></i
  ></span>
</ng-template>
<nz-card [nzBordered]="false" [nzTitle]="step1Edit">
  <nz-descriptions nzBordered [nzColumn]="1" nzLayout="vertical">
    <nz-descriptions-item nzTitle="合同编号（惠东）">{{ projectStepService.contractIDHD }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="合同编号（甲方）">{{ projectStepService.contractIDJF }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="合同名称">{{ projectStepService.contractName }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="甲方名称">{{ projectStepService.partyAName }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="合同类型">{{ projectStepService.contractType?.name }}</nz-descriptions-item>
    <nz-descriptions-item [nzTitle]="projectDateRangeTemp"
      >{{ (projectStepService.projectDateRange === null ? null : projectStepService.projectDateRange[0]) | date: 'yyyy-MM-dd' }}
      <i nz-icon nzType="swap-right" nzTheme="outline"></i>
      {{
        (projectStepService.projectDateRange === null ? null : projectStepService.projectDateRange[1]) | date: 'yyyy-MM-dd'
      }}</nz-descriptions-item
    >
    <ng-template #projectDateRangeTemp>
      <!-- <td class="ant-descriptions-item-label ng-star-inserted"> -->
      工期
      <i nz-icon nz-tooltip nzTooltipTitle="起始时间、结束时间" nzType="question-circle" nzTheme="outline"></i>
      <!-- </td> -->
    </ng-template>
    <nz-descriptions-item nzTitle="签订日期">{{ projectStepService.contractDate | date: 'yyyy-MM-dd' }} </nz-descriptions-item>
    <nz-descriptions-item nzTitle="质保期">{{
      projectStepService.warranty === null ? '' : projectStepService.warranty + '月'
    }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="项目地址">{{ projectStepService.projectAddress }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="甲方单位地址">{{ projectStepService.partyAAddress }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="甲方联系人姓名">{{ projectStepService.partyALinkmanName }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="甲方联系人电话">{{ projectStepService.partyALinkmanPhone }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="工程内容">{{ projectStepService.projectContent }}</nz-descriptions-item>
  </nz-descriptions>
</nz-card>
<ng-template #step1Edit>
  <span
    >{{ projectStepService.stepTitles[1] }} <i nz-icon nzType="edit" (click)="stepEditJump(1)" nz-tooltip nzTooltipTitle="去修改"></i
  ></span>
</ng-template>
<nz-card [nzBordered]="false" [nzTitle]="step2Edit">
  <nz-table [nzShowPagination]="false" [nzData]="projectStepService.linkmenInfo" nzTitle="甲方联系人信息" [nzScroll]="{ x: '1100px' }">
    <thead>
      <tr>
        <th>姓名</th>
        <th>类别</th>
        <th>单位名称</th>
        <th>职务</th>
        <th>手机</th>
        <th>电话</th>
        <th>QQ号码</th>
        <th>微信号码</th>
        <th>电子邮箱</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of projectStepService.linkmenInfo; let i = index">
        <td>
          <span>{{ item.linkmanName }}</span>
        </td>
        <td>
          <span>{{ item.linkmanType?.name }}</span>
        </td>
        <td>
          <span>{{ item.linkmanCompanyName }}</span>
        </td>
        <td>
          <span>{{ item.linkmanDuty }}</span>
        </td>
        <td>
          <span>{{ item.linkmanCellphone }}</span>
        </td>
        <td>
          <span>{{ item.linkmanPhone }}</span>
        </td>
        <td>
          <span>{{ item.linkmanQQ }}</span>
        </td>
        <td>
          <span>{{ item.linkmanWeChat }}</span>
        </td>
        <td>
          <span>{{ item.linkmanEmail }}</span>
        </td>
      </tr>
    </tbody>
  </nz-table>
</nz-card>
<ng-template #step2Edit>
  <span
    >{{ projectStepService.stepTitles[2] }} <i nz-icon nzType="edit" (click)="stepEditJump(2)" nz-tooltip nzTooltipTitle="去修改"></i
  ></span>
</ng-template>
<nz-card [nzBordered]="false" [nzTitle]="step3Edit">
  <nz-table [nzShowPagination]="false" [nzData]="projectStepService.subcontractInfo" nzTitle="业主联系人信息">
    <thead>
      <tr>
        <th>分包商名称</th>
        <th>合同金额（元）</th>
        <th>工作内容</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of projectStepService.subcontractInfo; let i = index">
        <td>
          <span>{{ item.subcontractName }}</span>
        </td>
        <td>
          <span>{{ item.subcontractSum | _currency }}</span>
        </td>
        <td>
          <span>{{ item.subcontractDetails }}</span>
        </td>
      </tr>
    </tbody>
  </nz-table>
</nz-card>
<ng-template #step3Edit>
  <span
    >{{ projectStepService.stepTitles[3] }} <i nz-icon nzType="edit" (click)="stepEditJump(3)" nz-tooltip nzTooltipTitle="去修改"></i
  ></span>
</ng-template>
<nz-card [nzBordered]="false" [nzTitle]="step4Edit">
  <!-- 标签页 -->
  <nz-tabset nzSize="large">
    <nz-tab nzTitle="路径配置">
      <nz-descriptions [nzColumn]="1" nzBordered nzLayout="vertical">
        <!-- 根目录 -->
        <nz-descriptions-item [nzTitle]="projectStepService.projectNewFilePaths[0].text">{{
          projectStepService.uploadPath[projectStepService.projectNewFilePaths[0].key]
        }}</nz-descriptions-item>
        <!-- 其他子目录 -->
        <nz-descriptions-item
          *ngFor="let childPathConfig of projectStepService.projectNewFilePaths[0].children; let i = index"
          [nzTitle]="childPathConfig.text"
          >{{ projectStepService.uploadPath[projectStepService.projectNewFilePaths[0].children[i].key] }}</nz-descriptions-item
        >
      </nz-descriptions>
    </nz-tab>
    <nz-tab
      *ngFor="let childPathConfig of projectStepService.projectNewFilePaths[0].children; let i = index"
      [nzTitle]="childPathConfig.text"
    >
      <nz-card nzType="inner">
        <h3
          [ngStyle]="{ margin: '16px 0' }"
          nz-tooltip
          [nzTooltipTitle]="
            projectStepService.uploadPath[projectStepService.projectNewFilePaths[0].children[i].key] === null
              ? '无'
              : projectStepService.uploadPath[projectStepService.projectNewFilePaths[0].children[i].key]
          "
        >
          {{
            projectStepService.uploadPath[projectStepService.projectNewFilePaths[0].children[i].key] === null
              ? '上传目录：无'
              : '上传目录：' + projectStepService.uploadPath[projectStepService.projectNewFilePaths[0].children[i].key]
          }}
        </h3>
        <nz-list nzBordered nzSize="large">
          <nz-list-header>文件列表</nz-list-header>
          <nz-list-item *ngFor="let uploadFile of projectStepService.uploadFileLists[i]">
            <span><i nz-icon nzType="paper-clip" nzTheme="outline"></i>{{ uploadFile.name }}</span>
          </nz-list-item>
        </nz-list>
      </nz-card>
    </nz-tab>
  </nz-tabset>
</nz-card>
<ng-template #step4Edit>
  <span
    >{{ projectStepService.stepTitles[4] }} <i nz-icon nzType="edit" (click)="stepEditJump(4)" nz-tooltip nzTooltipTitle="去修改"></i
  ></span>
</ng-template>
<footer-toolbar>
  <button nz-button (click)="prev()" [nzSize]="inputSize">
    <span>上一步：{{ projectStepService.stepTitles[projectStepService.step - 1] }}</span>
  </button>
  <button nz-button (click)="submitForm()" nzType="primary" [nzSize]="inputSize" [nzLoading]="projectStepService.submitButtonIsLoading">
    <span>提交</span>
  </button>
</footer-toolbar>
